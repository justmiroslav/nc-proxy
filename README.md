## Інструкції перед запуском сервера

1. Склонуйте репозиторій:
```bash
git clone https://github.com/justmiroslav/nc-proxy.git
```
2. Перейдіть до каталогу репозиторію
```bash
cd nc-proxy/
```
3. Виконайте скрипт для налаштування дозволів файлів:
```bash
bash chmod_files.sh
```
4. Запустіть налаштування сервера:
```bash
sudo ./setup.py
```

## Детальний опис файлів

### setup.py
Скрипт setup.py відповідає за налаштування серверного оточення перед запуском проксі-сервера. Ось що він робить:
  + Встановлює пакети: Встановлює необхідні пакети, такі як apache2, socat та nmap.
  + Налаштовує конфігурації Apache: Змінює конфігураційні файли Apache для прослуховування порту 20000.
  + Оновлює IPTables: Налаштовує IP-таблиці так, щоб дозволити трафік на порт 20000 лише з IP-адреси локального контейнера.
  + Налаштовує файли HTML: Копіює HTML-файли для повідомлень про успіх і помилки до веб-каталогу Apache і налаштовує дозволи.
  + Налаштовує служби проксі-сервера: Створює файл proxy_server.service для проксі-сервера і дозволяє йому запускатися під час завантаження.

### proxy_server.py

Це основний скрипт для проксі-сервера. Він виконує наступні функції:
  + Отримує ідентифікатор батьківського процесу (ppid) та sha256sum хеш виводу першого рядка команди top.
  + Oбчислює загальну суму на основі ppid і конвертованого в число останнього символу хешу sha256sum.
  + Виводить на клієнт потрібний файл залежно від того, чи є сума непарною або парною.

### proxy_server.service

Це службовий файл systemd для проксі-сервера. Він вказує, що проксі-сервер повинен бути запущений після служби Apache2 і вимагає запуску служби Apache2. Директива ExecStart визначає команду для запуску проксі-сервера, а директива Restart гарантує, що проксі-сервер завжди перезапускається, якщо він зупиняється.

### success.html та error.html

Це HTML-файли, які відображаються користувачеві. success.html відображається, коли сума, обчислена в get_file(ppid), є непарною, а error.html - коли сума є парною. Обидва файли містять повідомлення для користувача та базовий CSS для стилізації.
